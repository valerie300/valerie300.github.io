(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9dcbd9ea"],{"1dde":function(t,e,a){var c=a("d039"),n=a("b622"),l=a("2d00"),o=n("species");t.exports=function(t){return l>=51||!c((function(){var e=[],a=e.constructor={};return a[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"395d":function(t,e,a){"use strict";a.r(e);a("b0c0");var c=a("7a23"),n={class:"navbar navbar-expand-lg navbar-light bg-light"},l={class:"container-fluid"},o={class:"collapse navbar-collapse",id:"navbarSupportedContent"},s={class:"navbar-nav me-auto mb-2 mb-lg-0"},r={class:"nav-item"},i=Object(c["f"])("首頁"),d={class:"nav-item"},u=Object(c["f"])("前台產品列表"),b={class:"nav-item"},g=Object(c["f"])("前台購物車列表"),f={class:"nav-item"},m=Object(c["f"])("後台台購物車列表"),O=Object(c["f"])(" 前台購物車列表 "),j={class:"container"},p={class:"text-end"},v={class:"table align-middle"},h=Object(c["g"])("thead",null,[Object(c["g"])("tr",null,[Object(c["g"])("th"),Object(c["g"])("th",null,"品名"),Object(c["g"])("th",{style:{width:"150px"}},"數量/單位"),Object(c["g"])("th",null,"金額")])],-1),x={key:0,class:"fas fa-spinner fa-pulse"},y=Object(c["f"])(" x "),k={class:"input-group input-group-sm"},w={class:"input-group mb-3"},C={class:"input-group-text",id:"basic-addon2"},V={class:"text-end"},A=Object(c["g"])("template",null,[Object(c["g"])("tr",null,[Object(c["g"])("td",null,[Object(c["g"])("div",null,"購物車內無品項")])])],-1),I=Object(c["g"])("td",{colspan:"3",class:"text-end"},"總計",-1),S={class:"text-end"},_={key:0},L=Object(c["g"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),U={class:"text-end text-success"},$={class:"my-5 row justify-content-center"},q={class:"mb-3"},E=Object(c["g"])("label",{for:"name",class:"form-lable"},"姓名",-1),G={class:"mb-3"},F=Object(c["g"])("label",{for:"name",class:"form-lable"},"Email",-1),D={class:"mb-3"},H=Object(c["g"])("label",{for:"name",class:"form-lable"},"電話",-1),J={class:"mb-3"},M=Object(c["g"])("label",{for:"name",class:"form-lable"},"地址",-1),P={class:"mb-3"},T=Object(c["g"])("label",{for:"message",class:"form-label"},"留言",-1),B={class:"text-end"};function z(t,e,a,z,K,N){var Q=Object(c["x"])("router-link"),R=Object(c["x"])("Field"),W=Object(c["x"])("ErrorMessage"),X=Object(c["x"])("Form");return Object(c["s"])(),Object(c["d"])(c["a"],null,[Object(c["g"])("nav",n,[Object(c["g"])("div",l,[Object(c["g"])("div",o,[Object(c["g"])("ul",s,[Object(c["g"])("li",r,[Object(c["g"])(Q,{class:"nav-link",to:"/"},{default:Object(c["G"])((function(){return[i]})),_:1})]),Object(c["g"])("li",d,[Object(c["g"])(Q,{class:"nav-link",to:"/products"},{default:Object(c["G"])((function(){return[u]})),_:1})]),Object(c["g"])("li",b,[Object(c["g"])(Q,{class:"nav-link",to:"/carts"},{default:Object(c["G"])((function(){return[g]})),_:1})]),Object(c["g"])("li",f,[Object(c["g"])(Q,{class:"nav-link",to:"/dashboard"},{default:Object(c["G"])((function(){return[m]})),_:1})])])])])]),O,Object(c["g"])("div",j,[Object(c["g"])("div",p,[Object(c["g"])("button",{class:["btn btn-outline-danger",{disabled:0===K.cart.carts.length}],type:"button",onClick:e[1]||(e[1]=function(){return N.deleteAllCarts&&N.deleteAllCarts.apply(N,arguments)})}," 清空購物車 ",2)]),Object(c["g"])("table",v,[h,Object(c["g"])("tbody",null,[K.cart.carts?(Object(c["s"])(!0),Object(c["d"])(c["a"],{key:0},Object(c["w"])(K.cart.carts,(function(e){return Object(c["s"])(),Object(c["d"])("tr",{key:e.id},[Object(c["g"])("td",null,[Object(c["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return N.removeCartItem(e.id,e.product.title)},disabled:K.loadingStatus.loadingItemId===e.id},[K.loadingStatus.loadingItemId===e.id?(Object(c["s"])(),Object(c["d"])("i",x)):Object(c["e"])("",!0),y],8,["onClick","disabled"])]),Object(c["g"])("td",null,Object(c["A"])(e.product.title),1),Object(c["g"])("td",null,[Object(c["g"])("div",k,[Object(c["g"])("div",w,[Object(c["H"])(Object(c["g"])("input",{"onUpdate:modelValue":function(t){return e.qty=t},onChange:function(a){return t.updateCart(e)},disabled:K.loadingStatus.loadingItemId===e.id,min:"1",type:"number",class:"form-control"},null,40,["onUpdate:modelValue","onChange","disabled"]),[[c["D"],e.qty,void 0,{number:!0}]]),Object(c["g"])("span",C,Object(c["A"])(e.product.unit),1)])])]),Object(c["g"])("td",V,Object(c["A"])(e.final_total),1)])})),128)):Object(c["e"])("",!0),A]),Object(c["g"])("tfoot",null,[Object(c["g"])("tr",null,[I,Object(c["g"])("td",S,Object(c["A"])(K.cart.total),1)]),K.cart.final_total!==K.cart.total?(Object(c["s"])(),Object(c["d"])("tr",_,[L,Object(c["g"])("td",U,Object(c["A"])(K.cart.final_total),1)])):Object(c["e"])("",!0)])])]),Object(c["g"])("div",$,[Object(c["g"])(X,{onSubmit:N.createOrder,class:"col-md-6",ref:"form"},{default:Object(c["G"])((function(t){var a=t.errors;return[Object(c["g"])("div",q,[E,Object(c["g"])(R,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入 姓名",rules:"required",modelValue:K.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return K.form.user.name=t})},null,8,["class","modelValue"]),Object(c["g"])(W,{name:"姓名",class:"invalid-feedback"})]),Object(c["g"])("div",G,[F,Object(c["g"])(R,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":a["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:K.form.user.email,"onUpdate:modelValue":e[3]||(e[3]=function(t){return K.form.user.email=t})},null,8,["class","modelValue"]),Object(c["g"])(W,{name:"email",class:"invalid-feedback"})]),Object(c["g"])("div",D,[H,Object(c["g"])(R,{id:"tel",name:"電話",type:"text",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入 電話",rules:N.isPhone,modelValue:K.form.user.tel,"onUpdate:modelValue":e[4]||(e[4]=function(t){return K.form.user.tel=t})},null,8,["class","rules","modelValue"]),Object(c["g"])(W,{name:"電話",class:"invalid-feedback"})]),Object(c["g"])("div",J,[M,Object(c["g"])(R,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入 地址",rules:"required",modelValue:K.form.user.address,"onUpdate:modelValue":e[5]||(e[5]=function(t){return K.form.user.address=t})},null,8,["class","modelValue"]),Object(c["g"])(W,{name:"地址",class:"invalid-feedback"})]),Object(c["g"])("div",P,[T,Object(c["H"])(Object(c["g"])("textarea",{name:"message",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[6]||(e[6]=function(t){return K.form.message=t})},null,512),[[c["D"],K.form.message]])]),Object(c["g"])("div",B,[Object(c["g"])("button",{type:"submit",class:["btn btn-outline-primary",{disabled:0===K.cart.carts.length}]}," 送出訂單 ",2)])]})),_:1},8,["onSubmit"])])],64)}a("99af");var K={data:function(){return{loadingStatus:{loadingItemId:""},cart:{carts:{}},form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!0}},methods:{getCartList:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("taewei1230","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cart=e.data.data,t.isLoading=!1)})).catch((function(t){console.log(t)}))},deleteAllCarts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("taewei1230","/cart");this.$http.delete(e).then((function(e){e.data.success?(console.log("".concat(e.data.message,"所有購物車品項")),t.getCartList()):console.log(e.data.message)})).catch((function(t){console.log(t)}))},removeCartItem:function(t,e){var a=this;this.loadingStatus.loadingItemId=t;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("taewei1230","/cart/").concat(t);this.$http.delete(c).then((function(t){t.data.success?(console.log(e+t.data.message),a.getCartList(),a.loadingStatus.loadingItemId=""):console.log(t.data.message)})).catch((function(t){console.log(t)}))},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"請輸入正確電話號碼"},createOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("taewei1230","/order");this.$http.post(e,{data:this.form}).then((function(e){e.data.success?(console.log(e.data.message),t.getCartList(),t.$refs.form.resetForm()):console.log(e.data.message)})).catch((function(t){console.log(t)}))}},created:function(){this.getCartList()}};K.render=z;e["default"]=K},"65f0":function(t,e,a){var c=a("861d"),n=a("e8b5"),l=a("b622"),o=l("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?c(a)&&(a=a[o],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var c=a("c04e"),n=a("9bf2"),l=a("5c6c");t.exports=function(t,e,a){var o=c(e);o in t?n.f(t,o,l(0,a)):t[o]=a}},"99af":function(t,e,a){"use strict";var c=a("23e7"),n=a("d039"),l=a("e8b5"),o=a("861d"),s=a("7b0b"),r=a("50c4"),i=a("8418"),d=a("65f0"),u=a("1dde"),b=a("b622"),g=a("2d00"),f=b("isConcatSpreadable"),m=9007199254740991,O="Maximum allowed index exceeded",j=g>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),p=u("concat"),v=function(t){if(!o(t))return!1;var e=t[f];return void 0!==e?!!e:l(t)},h=!j||!p;c({target:"Array",proto:!0,forced:h},{concat:function(t){var e,a,c,n,l,o=s(this),u=d(o,0),b=0;for(e=-1,c=arguments.length;e<c;e++)if(l=-1===e?o:arguments[e],v(l)){if(n=r(l.length),b+n>m)throw TypeError(O);for(a=0;a<n;a++,b++)a in l&&i(u,b,l[a])}else{if(b>=m)throw TypeError(O);i(u,b++,l)}return u.length=b,u}})},b0c0:function(t,e,a){var c=a("83ab"),n=a("9bf2").f,l=Function.prototype,o=l.toString,s=/^\s*function ([^ (]*)/,r="name";c&&!(r in l)&&n(l,r,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},e8b5:function(t,e,a){var c=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==c(t)}}}]);
//# sourceMappingURL=chunk-9dcbd9ea.ea1794ed.js.map